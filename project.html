<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PassLock System</title>
<style>
  body {
    margin: 0;
    padding: 20px;
    background: #1a1a2e;
    color: #e6e6e6;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  
  .container {
    width: 100%;
    max-width: 600px;
  }
  
  .header {
    text-align: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #4cc9f0;
  }
  
  h1 {
    color: #4cc9f0;
    margin: 0;
  }
  
  .code-display {
    background: #0f3460;
    border-radius: 5px;
    padding: 20px;
    text-align: center;
    margin-bottom: 20px;
    border: 1px solid #1a5f7a;
  }
  
  .code-digits {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
  }
  
  .digit {
    width: 50px;
    height: 70px;
    background: #16213e;
    border: 2px solid #4cc9f0;
    border-radius: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-family: monospace;
  }
  
  .digit.empty {
    border-color: #555;
    color: #888;
  }
  
  .keypad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    max-width: 300px;
    margin: 0 auto 20px;
  }
  
  .key {
    height: 70px;
    background: #16213e;
    border: 1px solid #0f3460;
    border-radius: 5px;
    color: #e6e6e6;
    font-size: 20px;
    font-family: monospace;
    cursor: pointer;
  }
  
  .key:hover {
    background: #1a5f7a;
  }
  
  .zero {
    grid-column: 2;
  }
  
  .buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  
  button {
    flex: 1;
    padding: 12px;
    background: #4cc9f0;
    border: none;
    border-radius: 5px;
    color: #1a1a2e;
    font-family: monospace;
    font-weight: bold;
    cursor: pointer;
  }
  
  button:hover {
    background: #3aa8cc;
  }
  
  button.admin {
    background: #f05454;
    color: white;
  }
  
  button.admin:hover {
    background: #d04343;
  }
  
  button.clear {
    background: #888;
  }
  
  button.clear:hover {
    background: #777;
  }
  
  .message {
    text-align: center;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
    font-weight: bold;
  }
  
  .error {
    background: rgba(240, 84, 84, 0.2);
    color: #f05454;
    border: 1px solid #f05454;
  }
  
  .success {
    background: rgba(107, 207, 127, 0.2);
    color: #6bcf7f;
    border: 1px solid #6bcf7f;
  }
  
  .info {
    background: rgba(76, 201, 240, 0.2);
    color: #4cc9f0;
    border: 1px solid #4cc9f0;
  }
  
  .admin-menu {
    background: #0f3460;
    padding: 20px;
    border-radius: 5px;
    margin-top: 20px;
    border: 2px solid #f05454;
    display: none;
  }
  
  .admin-menu h3 {
    color: #f05454;
    margin-top: 0;
  }
  
  .admin-input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #16213e;
    border: 1px solid #0f3460;
    color: white;
    font-family: monospace;
  }
  
  .log-container {
    background: #16213e;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid #0f3460;
    max-height: 300px;
    overflow-y: auto;
    margin-top: 15px;
    display: none;
  }
  
  .log-title {
    color: #f05454;
    margin-bottom: 10px;
    font-size: 14px;
  }
  
  .log-entry {
    padding: 5px;
    border-bottom: 1px solid #0f3460;
    font-size: 12px;
  }
  
  .log-entry:last-child {
    border-bottom: none;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>PassLock System</h1>
     
    </div>
    
    <div class="code-display">
      <div>Enter Code</div>
      <div class="code-digits">
        <div class="digit empty" id="digit1">_</div>
        <div class="digit empty" id="digit2">_</div>
        <div class="digit empty" id="digit3">_</div>
        <div class="digit empty" id="digit4">_</div>
        <div class="digit empty" id="digit5">_</div>
      </div>
      <div id="conversionInfo"></div>
      <div id="message" class="message"></div>
    </div>
    
    <div id="keypad" class="keypad"></div>
    
    <div class="buttons">
      <button onclick="userLogin()">User Login</button>
      <button onclick="adminLogin()" class="admin">Admin Login</button>
      <button onclick="clearInput()" class="clear">Clear</button>
    </div>
    
    <div class="buttons">
      <button onclick="showAdminMenu()">Admin Menu</button>
    </div>
    
    <div id="adminMenu" class="admin-menu">
      <h3>Admin Menu</h3>
      <p>Enter admin code to access:</p>
      <input type="text" id="adminMenuCode" class="admin-input" placeholder="Enter admin code" maxlength="5">
      <div class="buttons">
        <button onclick="verifyAdminForMenu()">Verify</button>
        <button onclick="hideAdminMenu()" class="clear">Cancel</button>
      </div>
      
      <div id="adminControls" style="display: none;">
        <div style="margin-bottom: 15px;">
          <input type="text" id="newUserCodeInput" class="admin-input" placeholder="New user code" maxlength="5">
          <button onclick="changeUserCode()" style="width: 100%; margin-top: 5px;">Change User Code</button>
        </div>
        <div style="margin-bottom: 15px;">
          <input type="text" id="newAdminCodeInput" class="admin-input" placeholder="New admin code" maxlength="5">
          <button onclick="changeAdminCode()" style="width: 100%; margin-top: 5px;">Change Admin Code</button>
        </div>
        
        <div id="logContainer" class="log-container">
          <div class="log-title">Failed Attempt Log</div>
          <div id="logContent"></div>
        </div>
        
        <button onclick="hideAdminMenu()" style="width: 100%; margin-top: 15px; background: #888;">Close Admin Menu</button>
      </div>
    </div>
  </div>

<script>
// ============================================
// EXACT C++ CODE LOGIC
// ============================================

// Variables (same as C++ code)
let userPass = 24680;
let adminPass = 99999;
let wrongAttempts = 0;
let systemLocked = false;

// Keypad layout
let keypadLayout = ['0','1','2','3','4','5','6','7','8','9'];

// Attempt log (only admin can see)
let attemptHistory = [];

// Current input
let currentInput = '';

// Admin access flag
let adminAuthenticated = false;

// ============================================
// C++ COMPATIBLE FUNCTIONS
// ============================================

// shuffleKeypad() - Same as C++
function shuffleKeypad() {
    for(let i = 0; i < 10; i++) {
        let r = Math.floor(Math.random() * 10);
        let temp = keypadLayout[i];
        keypadLayout[i] = keypadLayout[r];
        keypadLayout[r] = temp;
    }
    renderKeypad();
}

// renderKeypad() - Display keypad
function renderKeypad() {
    const keypadEl = document.getElementById('keypad');
    keypadEl.innerHTML = '';
    
    // Row 1: keys 1, 2, 3
    for(let i = 1; i <= 3; i++) {
        const key = document.createElement('button');
        key.className = 'key';
        key.textContent = keypadLayout[i];
        key.onclick = () => handleKeyPress(keypadLayout[i]);
        keypadEl.appendChild(key);
    }
    
    // Row 2: keys 4, 5, 6
    for(let i = 4; i <= 6; i++) {
        const key = document.createElement('button');
        key.className = 'key';
        key.textContent = keypadLayout[i];
        key.onclick = () => handleKeyPress(keypadLayout[i]);
        keypadEl.appendChild(key);
    }
    
    // Row 3: keys 7, 8, 9
    for(let i = 7; i <= 9; i++) {
        const key = document.createElement('button');
        key.className = 'key';
        key.textContent = keypadLayout[i];
        key.onclick = () => handleKeyPress(keypadLayout[i]);
        keypadEl.appendChild(key);
    }
    
    // Zero key
    const zeroKey = document.createElement('button');
    zeroKey.className = 'key zero';
    zeroKey.textContent = keypadLayout[0];
    zeroKey.onclick = () => handleKeyPress(keypadLayout[0]);
    keypadEl.appendChild(zeroKey);
}

// convertFullInput() - Same as C++
function convertFullInput(input) {
    let result = 0;
    
    for (let i = 0; i < input.length; i++) {
        let c = input[i];
        let digit = parseInt(c);
        let converted = -1;
        
        for (let j = 0; j < 10; j++) {
            if (parseInt(keypadLayout[j]) === digit) {
                converted = j;
                break;
            }
        }
        
        if (converted === -1) {
            converted = digit;
        }
        
        result = result * 10 + converted;
    }
    
    return result;
}

// saveFailedAttempt() - Same as C++
function saveFailedAttempt(code, adminTry = false) {
    const now = new Date();
    const timeStamp = now.toLocaleTimeString();
    
    attemptHistory.push({
        time: timeStamp,
        code: code,
        type: adminTry ? 'Admin' : 'User'
    });
    
    // Only update log if admin is authenticated
    if (adminAuthenticated) {
        renderLog();
    }
}

// checkAdminCode() - Same as C++
function checkAdminCode(code) {
    let s = code.toString();
    
    if(s.length !== 5) {
        return false;
    }
    
    let first = parseInt(s[0]);
    if(first % 2 !== 0) {
        return false;
    }
    
    return true;
}

// activateLock() - Same as C++
function activateLock() {
    systemLocked = true;
    showMessage("!!! SYSTEM LOCKED (5 wrong attempts)\nOnly admin can unlock.", "error");
}

// ============================================
// LOGIN SYSTEM (Same logic as C++)
// ============================================

function userLogin() {
    if(systemLocked) {
        showMessage("System locked! Only admin can unlock.", "error");
        return false;
    }
    
    if(currentInput.length !== 5) {
        showMessage("Please enter 5 digits", "error");
        return false;
    }
    
    let displayedInput = currentInput;
    let actualInput = convertFullInput(displayedInput);
    
    showConversionInfo(displayedInput, actualInput);
    
    if(actualInput === userPass) {
        showMessage("ACCESS GRANTED", "success");
        wrongAttempts = 0;
        clearInput();
        shuffleKeypad(); // Shuffle after login
        return true;
    } else {
        wrongAttempts++;
        showMessage(`Wrong code! Failed attempts: ${wrongAttempts}/5`, "error");
        saveFailedAttempt(actualInput, false);
        
        if(wrongAttempts >= 5) {
            activateLock();
        }
        
        clearInput();
        shuffleKeypad(); // Shuffle after failed attempt
        return false;
    }
}

function adminLogin() {
    if(currentInput.length !== 5) {
        showMessage("Please enter 5 digits", "error");
        return false;
    }
    
    let displayedInput = currentInput;
    let actualInput = convertFullInput(displayedInput);
    
    showConversionInfo(displayedInput, actualInput);
    
    if(actualInput === adminPass) {
        showMessage("ADMIN ACCESS GRANTED\nSystem unlocked.", "success");
        systemLocked = false;
        wrongAttempts = 0;
        clearInput();
        shuffleKeypad(); // Shuffle after admin login
        return true;
    } else {
        wrongAttempts++;
        showMessage(`Wrong admin code! Failed attempts: ${wrongAttempts}/5`, "error");
        saveFailedAttempt(actualInput, true);
        
        if(wrongAttempts >= 5) {
            activateLock();
        }
        
        clearInput();
        shuffleKeypad(); // Shuffle after failed admin attempt
        return false;
    }
}

// ============================================
// HELPER FUNCTIONS
// ============================================

function handleKeyPress(digit) {
    if(currentInput.length >= 5) return;
    
    currentInput += digit;
    updateDisplay();
}

function updateDisplay() {
    const digits = ['digit1', 'digit2', 'digit3', 'digit4', 'digit5'];
    
    for(let i = 0; i < 5; i++) {
        const digitEl = document.getElementById(digits[i]);
        if(i < currentInput.length) {
            digitEl.textContent = '•';
            digitEl.classList.remove('empty');
        } else {
            digitEl.textContent = '_';
            digitEl.classList.add('empty');
        }
    }
}

function clearInput() {
    currentInput = '';
    updateDisplay();
    document.getElementById('conversionInfo').textContent = '';
}

function showMessage(text, type) {
    const msgEl = document.getElementById('message');
    msgEl.textContent = text;
    msgEl.className = `message ${type}`;
    
    setTimeout(() => {
        msgEl.textContent = '';
        msgEl.className = 'message';
    }, 3000);
}

function showConversionInfo(displayed, actual) {
    document.getElementById('conversionInfo').textContent = `Displayed: ${displayed} → Actual: ${actual}`;
    document.getElementById('conversionInfo').style.color = '#4cc9f0';
}

function showAdminMenu() {
    // Show admin menu
    document.getElementById('adminMenu').style.display = 'block';
    document.getElementById('adminControls').style.display = 'none';
    document.getElementById('logContainer').style.display = 'none';
    document.getElementById('adminMenuCode').value = '';
    document.getElementById('adminMenuCode').focus();
}

function hideAdminMenu() {
    document.getElementById('adminMenu').style.display = 'none';
    adminAuthenticated = false;
}

function verifyAdminForMenu() {
    const code = document.getElementById('adminMenuCode').value;
    
    if(code.length !== 5) {
        showMessage("Please enter 5 digits", "error");
        return;
    }
    
    const displayedInput = code;
    const actualInput = convertFullInput(displayedInput);
    
    if(actualInput === adminPass) {
        // Success - show admin controls
        adminAuthenticated = true;
        document.getElementById('adminControls').style.display = 'block';
        document.getElementById('logContainer').style.display = 'block';
        showMessage("Admin verified. Access granted.", "success");
        
        // Show the failed attempt log
        renderLog();
        
        shuffleKeypad(); // Shuffle after admin verification
    } else {
        // Failed
        wrongAttempts++;
        showMessage(`Wrong admin code! Failed attempts: ${wrongAttempts}/5`, "error");
        saveFailedAttempt(actualInput, true);
        document.getElementById('adminMenuCode').value = '';
        
        if(wrongAttempts >= 5) {
            activateLock();
            hideAdminMenu();
        }
        
        shuffleKeypad(); // Shuffle after failed admin attempt
    }
}

function changeUserCode() {
    if(!adminAuthenticated) {
        showMessage("Admin verification required", "error");
        return;
    }
    
    const input = document.getElementById('newUserCodeInput');
    const newCode = parseInt(input.value);
    
    if(isNaN(newCode) || newCode.toString().length !== 5) {
        showMessage("User code must be 5 digits", "error");
        return;
    }
    
    if(!checkAdminCode(newCode)) {
        showMessage("User code must start with even number", "error");
        return;
    }
    
    userPass = newCode;
    input.value = '';
    showMessage("User code updated", "success");
    shuffleKeypad(); // Shuffle after changing code
}

function changeAdminCode() {
    if(!adminAuthenticated) {
        showMessage("Admin verification required", "error");
        return;
    }
    
    const input = document.getElementById('newAdminCodeInput');
    const newCode = parseInt(input.value);
    
    if(isNaN(newCode) || newCode.toString().length !== 5) {
        showMessage("Admin code must be 5 digits", "error");
        return;
    }
    
    if(!checkAdminCode(newCode)) {
        showMessage("Admin code must start with even number", "error");
        return;
    }
    
    adminPass = newCode;
    input.value = '';
    showMessage("Admin code updated", "success");
    shuffleKeypad(); // Shuffle after changing code
}

function renderLog() {
    const container = document.getElementById('logContent');
    container.innerHTML = '';
    
    if(attemptHistory.length === 0) {
        container.innerHTML = '<div class="log-entry">No failed attempts yet.</div>';
        return;
    }
    
    attemptHistory.forEach((attempt, i) => {
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `
            <div><strong>#${i + 1}</strong> ${attempt.time}</div>
            <div>Code: ${attempt.code} | Type: ${attempt.type}</div>
        `;
        container.appendChild(entry);
    });
}

// ============================================
// INITIALIZATION
// ============================================

function init() {
    // Initial shuffle
    shuffleKeypad();
    
    // Keyboard support
    document.addEventListener('keydown', (e) => {
        if(e.key >= '0' && e.key <= '9') {
            if(keypadLayout.includes(e.key)) {
                handleKeyPress(e.key);
            }
        } else if(e.key === 'Enter') {
            userLogin();
        } else if(e.key === 'Escape') {
            clearInput();
        } else if(e.key === 'Backspace') {
            currentInput = currentInput.slice(0, -1);
            updateDisplay();
        }
    });
}

// Initialize
init();
</script>
</body>
</html>